---
layout: default
title: 书单
---

<div class="bookshelf">
  {% for book in site.data.books %}
  <div class="book-card">
    <figure class="book-cover">
      <img src="{{ book.cover }}" alt="{{ book.title }}">
      <figcaption>{{ book.title }}</figcaption>
    </figure>
    
    <div class="book-info">
      <!-- 阅读状态标签 -->
      <div class="reading-status">
        {% if book.end_date %}
          {% assign end_date = book.end_date | date: '%s' | plus: 0 %}
          {% assign current_date = 'now' | date: '%s' | plus: 0 %}
          {% if end_date < current_date %}
            <span class="status finished">已读</span>
          {% else %}
            <span class="status reading">在读</span>
          {% endif %}
        {% elsif book.start_date %}
          <span class="status reading">在读</span>
        {% endif %}
      </div>
      
      <h3>{{ book.title }}</h3>
      <div class="rating">
        {% assign fullStars = book.rating | floor %}
        {% assign halfStar = book.rating | modulo: 1 %}
        {% for i in (1..5) %}
          {% if i <= fullStars %}
            ★
          {% elsif halfStar >= 0.5 and i == fullStars + 1 %}
            ☆
          {% else %}
            ☆
          {% endif %}
        {% endfor %}
        <span>({{ book.rating }})</span>
      </div>
      <div class="reading-time">
        {% if book.start_date %}
          <div>📖 {{ book.start_date | date: "%Y.%m.%d" }}</div>
        {% endif %}
        {% if book.end_date %}
          <div>✅ {{ book.end_date | date: "%Y.%m.%d" }}</div>
        {% endif %}
      </div>
      <p class="review">{{ book.review | markdownify }}</p>
      <div class="book-tags">
        {% for tag in book.tags %}
        <span class="tag">{{ tag }}</span>
        {% endfor %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<style>
/* 三列布局 */
.bookshelf {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 30px;
  padding: 2rem;
  max-width: 1200px;
  margin: 0 auto;
}

/* 响应式布局 */
@media (max-width: 1024px) {
  .bookshelf {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 640px) {
  .bookshelf {
    grid-template-columns: 1fr;
  }
}

/* 阅读状态标签 */
.reading-status {
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 2;
}

.status {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 15px;
  font-size: 13px;
  font-weight: 600;
  text-shadow: 0 1px 1px rgba(0,0,0,0.1);
}

.status.reading {
  background: #e3f2fd;
  color: #1976d2;
  border: 1px solid #90caf9;
}

.status.finished {
  background: #e8f5e9;
  color: #2e7d32;
  border: 1px solid #a5d6a7;
}

/* 暗色模式适配 */
@media (prefers-color-scheme: dark) {
  .status.reading {
    background: rgba(25, 118, 210, 0.15);
    color: #90caf9;
    border-color: #1976d2;
  }
  .status.finished {
    background: rgba(46, 125, 50, 0.15);
    color: #81c784;
    border-color: #2e7d32;
  }
}

/* 其他原有样式保持不变 */
.book-card { ... }
.book-cover img { height: 200px; ... }
.book-info { ... }
.rating { ... }
.reading-time { ... }
.book-tags { ... }
</style>

<!-- 保持原有JavaScript代码不变 -->

<script>
document.querySelectorAll('.book-card').forEach(card => {
  card.addEventListener('mousemove', (e) => {
    const rect = card.getBoundingClientRect();
    const xPos = (e.clientX - rect.left) / rect.width;
    card.style.transform = `perspective(1000px) 
                           rotateY(${(xPos - 0.5) * 10}deg) 
                           rotateX(${(0.5 - xPos) * 5}deg)`;
  });
  
  card.addEventListener('mouseleave', () => {
    card.style.transform = 'none';
  });
});
</script>