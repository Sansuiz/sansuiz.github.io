---
layout: default
title: 书单
---

<div class="bookshelf">
  {% for book in site.data.books %}
  <div class="book-card">
    <figure class="book-cover">
      <img src="{{ book.cover }}" alt="{{ book.title }}">
      <figcaption>{{ book.title }}</figcaption>
    </figure>
    
    <div class="book-info">
      <!-- 新增阅读状态 -->
      <div class="reading-status">
        {% if book.end_date %}
          {% capture now_unix %}{{ 'now' | date: '%s' }}{% endcapture %}
          {% capture end_unix %}{{ book.end_date | date: '%s' }}{% endcapture %}
          {% if end_unix < now_unix %}
            <span class="status finished">已读</span>
          {% else %}
            <span class="status reading">在读</span>
          {% endif %}
        {% elsif book.start_date %}
          <span class="status reading">在读</span>
        {% endif %}
      </div>
      
      <h3>{{ book.title }}</h3>
      <div class="rating">
        <!-- 原有评分代码保持不变 -->
      </div>
      <div class="reading-time">
        <!-- 原有时间显示代码保持不变 -->
      </div>
      <p class="review">{{ book.review | markdownify }}</p>
      <div class="book-tags">
        <!-- 原有标签代码保持不变 -->
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<style>
/* 修改书架布局为每行三本 */
.bookshelf {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 2rem;
  padding: 2rem 0;
}

/* 响应式调整 */
@media (max-width: 992px) {
  .bookshelf {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 576px) {
  .bookshelf {
    grid-template-columns: 1fr;
  }
}

/* 新增阅读状态样式 */
.reading-status {
  position: absolute;
  top: 15px;
  right: 15px;
}

.status {
  padding: 4px 10px;
  border-radius: 12px;
  font-size: 0.8em;
  font-weight: 500;
}

.status.reading {
  background: #e3f2fd;
  color: #2196f3;
}

.status.finished {
  background: #e8f5e9;
  color: #4caf50;
}

/* 暗色模式适配 */
@media (prefers-color-scheme: dark) {
  .status.reading {
    background: rgba(33, 150, 243, 0.2);
    color: #90caf9;
  }
  .status.finished {
    background: rgba(76, 175, 80, 0.2);
    color: #a5d6a7;
  }
}
</style>

<!-- 原有JavaScript和其他样式保持不变 -->