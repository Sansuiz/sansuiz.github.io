---
layout: default
---

<div class="paper-container">
  <button class="nav-btn prev">←</button>
  <div class="paper-stack">
    {% for card in site.data.cards %}
    <div class="paper-card" style="--card-index: {{ forloop.index0 }}" data-content="{{ card.content | escape }}">
      <div class="card-content">
        <img src="{{ card.image }}" alt="{{ card.title }}" class="card-image">
        <div class="card-meta">
          <h3>{{ card.title }}</h3>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  <button class="nav-btn next">→</button>
</div>

<div class="card-detail-view">
  <div class="detail-container">
    <div class="detail-image"></div>
    <div class="detail-content">
      <h2 class="detail-title"></h2>
      <p class="detail-text"></p>
    </div>
  </div>
</div>

<style>
.paper-container {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding-left: 5%;
  background: #f0f0f0;
  position: relative;
}

.nav-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 50px;
  height: 50px;
  background: rgba(237,98,126,0.7);
  color: white;
  border: none;
  border-radius: 50%;
  font-size: 1.5rem;
  cursor: pointer;
  z-index: 10;
}

.prev {
  left: 20px;
}

.next {
  right: 20px;
}

.paper-stack {
  position: relative;
  width: 300px;
  height: 400px;
}

.paper-card {
  position: absolute;
  width: 100%;
  height: 100%;
  background: white;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.1);
  transform-origin: center bottom;
  transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1), z-index 0.4s;
  cursor: pointer;
}

.paper-card:nth-child(1) {
  transform: translateY(0) rotateZ(0deg);
  z-index: 3;
}

.paper-card:nth-child(2) {
  transform: translateY(10px) rotateZ(-2deg);
  z-index: 2;
}

.paper-card:nth-child(3) {
  transform: translateY(20px) rotateZ(2deg);
  z-index: 1;
}

.paper-card:hover {
  transform: translateY(-20px) rotateZ(0deg) !important;
}

.card-content {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
}

.card-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.card-meta {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 1.5rem;
  background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, transparent 100%);
  color: white;
}

.paper-stack:hover .paper-card {
  transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1), z-index 0.6s;
}

.card-detail-view {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 100;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s ease;
}

.card-detail-view.active {
  opacity: 1;
  pointer-events: all;
}

.detail-container {
  width: 80%;
  max-width: 800px;
  height: 70vh;
  background: white;
  border-radius: 12px;
  display: flex;
  overflow: hidden;
}

.detail-image {
  width: 50%;
  height: 100%;
  background-size: cover;
  background-position: center;
}

.detail-content {
  width: 50%;
  padding: 2rem;
  overflow-y: auto;
}

.detail-text {
  font-family: "KaiTi", "楷体", serif;
  line-height: 1.8;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const cards = document.querySelectorAll('.paper-card');
  const prevBtn = document.querySelector('.prev');
  const nextBtn = document.querySelector('.next');
  
  let currentIndex = 0;
  
  function updateCards() {
    cards.forEach((card, index) => {
      const offset = (index - currentIndex) * 10;
      const rotation = (index - currentIndex) * 2;
      card.style.transform = `translateY(${offset}px) rotateZ(${rotation}deg)`;
      card.style.zIndex = cards.length - Math.abs(index - currentIndex);
    });
  }
  
  prevBtn.addEventListener('click', () => {
    currentIndex = (currentIndex - 1 + cards.length) % cards.length;
    updateCards();
  });
  
  nextBtn.addEventListener('click', () => {
    currentIndex = (currentIndex + 1) % cards.length;
    updateCards();
  });
  
  const detailView = document.querySelector('.card-detail-view');
  const detailImage = document.querySelector('.detail-image');
  const detailTitle = document.querySelector('.detail-title');
  const detailText = document.querySelector('.detail-text');
  
  let currentIndex = 0;
  let isDragging = false;
  let startY = 0;
  
  // 鼠标滑动切换卡片
  document.querySelector('.paper-stack').addEventListener('mousedown', (e) => {
    isDragging = true;
    startY = e.clientY;
  });
  
  document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    
    const deltaY = e.clientY - startY;
    if (Math.abs(deltaY) > 10) {
      updateCards(deltaY > 0 ? -1 : 1);
      isDragging = false;
    }
  });
  
  document.addEventListener('mouseup', () => {
    isDragging = false;
  });
  
  function updateCards(direction) {
    currentIndex = (currentIndex + direction + cards.length) % cards.length;
    
    cards.forEach((card, index) => {
      const offset = (index - currentIndex) * 10;
      const rotation = (index - currentIndex) * 2;
      card.style.transform = `translateY(${offset}px) rotateZ(${rotation}deg)`;
      card.style.zIndex = cards.length - Math.abs(index - currentIndex);
    });
  }
  
  // 点击卡片放大
  cards.forEach(card => {
    card.addEventListener('click', () => {
      detailImage.style.backgroundImage = `url(${card.querySelector('.card-image').src})`;
      detailTitle.textContent = card.querySelector('h3').textContent;
      detailText.textContent = card.dataset.content;
      detailView.classList.add('active');
    });
  });
  
  // 关闭详情视图
  detailView.addEventListener('click', (e) => {
    if (e.target === detailView) {
      detailView.classList.remove('active');
    }
  });
});
</script>