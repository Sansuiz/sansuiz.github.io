---
layout: default
title: 摄影作品
---

<div class="gallery-container">
  {% for photo in site.data.photos %}
  <div class="photo-card" data-index="0">
    <!-- 主展示区域 -->
    <div class="slider-container">
      {% for image in photo.images %}
      <img 
        src="{{ image }}" 
        class="slide-image {% if forloop.first %}active{% endif %}" 
        alt="第 {{ forloop.index }} 张"
        loading="lazy"
      >
      {% endfor %}
      
      <!-- 导航指示器 -->
      <div class="slide-indicator">
        {% for image in photo.images %}
        <span class="dot {% if forloop.first %}active{% endif %}"></span>
        {% endfor %}
      </div>
    </div>

    <!-- 文字信息 -->
    <div class="photo-info">
      <h3>{{ photo.title }}</h3>
      <div class="meta">
        <span>📍 {{ photo.location }}</span>
        <time>📅 {{ photo.date }}</time>
      </div>
      <p>{{ photo.description }}</p>
      <div class="photo-tags">
        {% for tag in photo.tags %}
        <span>#{{ tag }}</span>
        {% endfor %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<style>
/* 基础布局 */
.gallery-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}

.photo-card {
  margin: 4rem 0;
  position: relative;
}

/* 滑动容器 */
.slider-container {
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}

.slide-image {
  width: 100%;
  height: 70vh;
  object-fit: cover;
  position: absolute;
  opacity: 0;
  transition: opacity 0.6s ease, transform 0.6s ease;
}

.slide-image.active {
  opacity: 1;
  position: relative;
  transform: translateX(0);
}

/* 导航指示器 */
.slide-indicator {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 8px;
  z-index: 2;
}

.dot {
  width: 10px;
  height: 10px;
  background: rgba(255,255,255,0.5);
  border-radius: 50%;
  cursor: pointer;
  transition: background 0.3s ease;
}

.dot.active {
  background: rgba(255,255,255,0.9);
}

/* 文字信息 */
.photo-info {
  margin: 1.5rem 0;
  padding: 1.5rem;
}

.meta {
  display: flex;
  gap: 1.5rem;
  color: #666;
  margin: 0.5rem 0;
}

.photo-tags {
  margin-top: 1rem;
  display: flex;
  gap: 0.8rem;
  flex-wrap: wrap;
}

.photo-tags span {
  background: #f0f0f0;
  padding: 0.3rem 1rem;
  border-radius: 20px;
  font-size: 0.9em;
}

/* 暗色模式适配 */
@media (prefers-color-scheme: dark) {
  .photo-tags span {
    background: #333;
    color: #ddd;
  }
  .meta {
    color: #aaa;
  }
}
</style>

<script>
document.querySelectorAll('.photo-card').forEach(card => {
  let isDragging = false;
  let startX = 0;
  let currentIndex = 0;
  const images = card.querySelectorAll('.slide-image');
  const dots = card.querySelectorAll('.dot');
  const total = images.length;

  // 鼠标横向滑动逻辑
  card.addEventListener('mousedown', (e) => {
    isDragging = true;
    startX = e.clientX;
  });

  card.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    const deltaX = e.clientX - startX;
    
    // 设置滑动阈值
    if (Math.abs(deltaX) > 50) {
      if (deltaX > 0 && currentIndex > 0) {
        currentIndex--;
      } else if (deltaX < 0 && currentIndex < total - 1) {
        currentIndex++;
      }
      updateSlider();
      isDragging = false;
    }
  });

  card.addEventListener('mouseup', () => isDragging = false);
  card.addEventListener('mouseleave', () => isDragging = false);

  // 指示器点击
  dots.forEach((dot, index) => {
    dot.addEventListener('click', () => {
      currentIndex = index;
      updateSlider();
    });
  });

  function updateSlider() {
    images.forEach((img, i) => {
      img.classList.toggle('active', i === currentIndex);
    });
    dots.forEach((dot, i) => {
      dot.classList.toggle('active', i === currentIndex);
    });
  }

  // 键盘左右键支持
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft' && currentIndex > 0) {
      currentIndex--;
      updateSlider();
    } else if (e.key === 'ArrowRight' && currentIndex < total - 1) {
      currentIndex++;
      updateSlider();
    }
  });
});
</script>