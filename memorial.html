<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>纪念日 - SANSUIZ</title>
  <link rel="shortcut icon" href="{{ site.baseurl }}/assets/fav.svg">
  <link rel="stylesheet" href="css/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
</head>

<body>
  <main class="container">
    <header>
      <h1>Memorial Days</h1>
      <small>时光会走远，影像能长存</small>
    </header>

    <section class="bio memorial-content">
      <div id="memorial-container"></div>

      <script>
        fetch('memorial_days.yml')
          .then(response => response.text())
          .then(yaml => {
            const data = jsyaml.load(yaml);
            renderMemorials(data.days);
          })
          .catch(err => console.error('加载纪念日数据失败:', err));

        function calculateDaysDifference(targetDate) {
          const oneDay = 24 * 60 * 60 * 1000;
          const target = new Date(targetDate);
          const today = new Date();
          today.setHours(0, 0, 0, 0);
          
          const diff = Math.round((target - today) / oneDay);
          return diff > 0 ? `还剩 ${diff} 天` : `已过去 ${Math.abs(diff)} 天`;
        }

        function renderMemorials(days) {
          const container = document.getElementById('memorial-container');
          
          days.forEach(day => {
            const item = document.createElement('div');
            item.className = 'timeline-item';
            item.innerHTML = `
              <div class="timeline-line"></div>
              <time datetime="${day.date}">${day.date.replace(/-/g,'.')}</time>
              <h3>${day.title}</h3>
              <p>${day.description}</p>
              <div class="days-counter">
                <span>${calculateDaysDifference(day.date)}</span>
              </div>
              `;
            
            
            container.appendChild(item);
          });
        }
      </script>
    </section>

    <div class="logo-container">
      <a href="/">
        <img src="https://static.flomoapp.com/file/2025-03-12/3540/08595fc04a6dc5fba640cd35aed8b838.gif" alt="返回主页" class="logo">
      </a>
    </div>
  </main>
</body>
</html>