---
layout: default
title: 便签
---

<!-- 添加标签筛选容器 -->
<div class="tag-filter">
  <div class="tags-list"></div>
</div>

<ul class="notes">
{% for note in site.data.notes %}
<li class="note" 
    id="t{{ note.date | date: "%Y%m%d%I%M" }}"
    {% if note.tags %}data-tags="{{ note.tags | join: ',' | downcase }}"{% endif %}>
  
  <h2 class="note-heading">
    <a href="#t{{ note.date | date: "%Y%m%d%I%M" }}">
      {{ note.date | date: "%B %d, %Y" }} #
    </a>
  </h2>
  
  <div class="note-content">
    {{ note.content | markdownify }}
  </div>

  {% if note.tags %}
  <div class="note-tags">
    {% for tag in note.tags %}
    <span class="tag">{{ tag }}</span>
    {% endfor %}
  </div>
  {% endif %}
</li>
{% endfor %}
</ul>

<style>
/* 新增标签筛选样式 */
.tag-filter {
  margin-bottom: 2rem;
  padding: 1rem;
  background: #f8f8f8;
  border-radius: 8px;
}

.tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.tag-item {
  display: inline-block;
  padding: 6px 12px;
  background: #e0e0e0;
  border-radius: 16px;
  cursor: pointer;
  transition: all 0.2s;
}

.tag-item.active {
  background: #2196F3;
  color: white;
}

.note-tags {
  margin-top: 1rem;
}

.note-tags .tag {
  display: inline-block;
  padding: 4px 8px;
  background: #f0f0f0;
  border-radius: 8px;
  font-size: 0.9em;
  margin: 2px;
}

/* 确保默认显示笔记 */
.note {
  display: block !important;
  margin-bottom: 2rem;
  padding: 1rem;
  border: 1px solid #eee;
  border-radius: 8px;
}
</style>

<script>
// 纯前端实现标签筛选（直接嵌入在HTML中）
document.addEventListener('DOMContentLoaded', function() {
  // 获取所有笔记元素
  const notes = document.querySelectorAll('.note');
  
  // 收集所有标签（带重复检测）
  const tagsSet = new Set();
  notes.forEach(note => {
    const tags = note.dataset.tags ? note.dataset.tags.split(',') : [];
    tags.forEach(tag => tagsSet.add(tag.trim().toLowerCase()));
  });

  // 生成标签按钮
  const tagsContainer = document.querySelector('.tags-list');
  tagsSet.forEach(tag => {
    const button = document.createElement('div');
    button.className = 'tag-item';
    button.textContent = tag;
    button.dataset.tag = tag;
    tagsContainer.appendChild(button);
  });

  // 添加点击事件
  let selectedTags = new Set();
  tagsContainer.addEventListener('click', (e) => {
    const target = e.target;
    if (!target.classList.contains('tag-item')) return;

    const tag = target.dataset.tag;
    
    // 切换选中状态
    target.classList.toggle('active');
    if (selectedTags.has(tag)) {
      selectedTags.delete(tag);
    } else {
      selectedTags.add(tag);
    }

    // 过滤笔记
    notes.forEach(note => {
      const noteTags = note.dataset.tags ? note.dataset.tags.split(',') : [];
      const shouldShow = selectedTags.size === 0 || 
        noteTags.some(noteTag => selectedTags.has(noteTag.trim().toLowerCase()));
      
      note.style.display = shouldShow ? 'block' : 'none';
    });
  });
});
</script>